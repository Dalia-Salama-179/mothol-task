{"remainingRequest":"F:\\mothol-task\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\mothol-task\\src\\pages\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\mothol-task\\src\\pages\\Users.vue","mtime":1606285732847},{"path":"F:\\mothol-task\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\mothol-task\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\mothol-task\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\mothol-task\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VycyBmcm9tICIuLi9hcGkvdXNlcnMiOwppbXBvcnQgQXBwU2VsZWN0MiBmcm9tICIuLi9jb21wb25lbnRzL0FwcFNlbGVjdDIiOwppbXBvcnQgJCBmcm9tICJqcXVlcnkiOwppbXBvcnQgQWRkRWRpdFVzZXIgZnJvbSAiLi4vY29tcG9uZW50cy9BZGRFZGl0VXNlciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAidXNlcnMiLAogICAgY29tcG9uZW50czoge0FkZEVkaXRVc2VyLCBBcHBTZWxlY3QyfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGlzdDogWydkZXBhcnRtZW50cycsICdwb3NpdGlvbnMnLCAnYnJhbmRzJywgJ2NvdW50cmllcycsICdyb2xlcyddLAogICAgICAgICAgICBmaWx0ZXJMaXN0czogewogICAgICAgICAgICAgICAgZGVwYXJ0bWVudHM6IFtdLAogICAgICAgICAgICAgICAgcG9zaXRpb25zOiBbXSwKICAgICAgICAgICAgICAgIGJyYW5kczogW10sCiAgICAgICAgICAgICAgICBjb3VudHJpZXM6IFtdLAogICAgICAgICAgICAgICAgcm9sZXM6IFtdLAogICAgICAgICAgICAgICAgc3RhdHVzOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnQWN0aXZlJywKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IDEKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdJbmFjdGl2ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmlsdGVyOiB7CiAgICAgICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICAgICAgbGVuZ3RoOiAxMCwKICAgICAgICAgICAgICAgIHJvbGU6ICcnLAogICAgICAgICAgICAgICAgZGVwYXJ0bWVudDogJycsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsCiAgICAgICAgICAgICAgICBicmFuZDogJycsCiAgICAgICAgICAgICAgICBjb3VudHJ5OiAnJywKICAgICAgICAgICAgICAgIG5hdGlvbmFsaXR5OiAnJywKICAgICAgICAgICAgICAgIGFjdGl2ZTogJycsCiAgICAgICAgICAgICAgICB0ZXh0X3NlYXJjaDogJycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXNlcnM6IHt9LAogICAgICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICAgICAgbGFzdFBhZ2U6IG51bGwsCiAgICAgICAgICAgIHVzZXJJbkFjdGlvbjogZmFsc2UsCiAgICAgICAgICAgIHVzZXJUb0VkaXQ6IG51bGwsCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgJ2ZpbHRlcic6IHsKICAgICAgICAgICAgZGVlcDogdHJ1ZSwKICAgICAgICAgICAgaGFuZGxlcjogJ2dldFVzZXJzJwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMubGlzdC5tYXAobGkgPT4gewogICAgICAgICAgICB1c2Vycy5nZXRGaWx0ZXJMaXN0KGxpKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckxpc3RzW2xpXSA9IHJlczsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSk7CgogICAgICAgIC8qKgogICAgICAgICAqIEluaXRpYWxpemUgcGFnaW5hdGlvbiBzZWxlY3QKICAgICAgICAgKi8KICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgJCgnLnBhZ2luYXRpb24tb3B0aW9ucycpLnNlbGVjdDIoewogICAgICAgICAgICB3aWR0aDogJ3Jlc29sdmUnLAogICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1BsZWFzZSBzZWxlY3Qgb3B0aW9uJwogICAgICAgIH0pLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoYXQuZmlsdGVyLnBhZ2UgPSAkKCcucGFnaW5hdGlvbi1vcHRpb25zJykuc2VsZWN0MigndmFsJyk7CiAgICAgICAgfSk7CgogICAgICAgIC8qKgogICAgICAgICAqIEdldCBhbGwgdXNlcnMKICAgICAgICAgKi8KICAgICAgICB0aGlzLmdldFVzZXJzKCk7CgogICAgICAgICQoJyN1c2VyRm9ybScpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoYXQudXNlckluQWN0aW9uID0gZmFsc2UKICAgICAgICB9KQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBnZXRVc2VycygpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCdodHRwczovL3d3dy5rZWRlbi1lZHUuY29tL2tudHJhL2FwaS91c2Vycy9saXN0JywgewogICAgICAgICAgICAgICAgLi4udGhpcy5maWx0ZXIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJzID0gcmVzLmRhdGEuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHJlcy5kYXRhLmRhdGEuZGF0YS5jdXJyZW50X3BhZ2U7CiAgICAgICAgICAgICAgICB0aGlzLmxhc3RQYWdlID0gcmVzLmRhdGEuZGF0YS5kYXRhLmxhc3RfcGFnZTsKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gdGhpcy5sb2FkaW5nID0gZmFsc2UpCiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogTWV0aG9kIGludm9rZWQgd2hlbiB1c2VyIGZvcm0gaXMgc3VibWl0dGVkIHN1Y2Nlc3NmdWxseQogICAgICAgICAqLwogICAgICAgIHVzZXJTYXZlZCgpIHsKICAgICAgICAgICAgJCgnI3VzZXJGb3JtJykubW9kYWwoJ3RvZ2dsZScpOwogICAgICAgICAgICB0aGlzLnVzZXJUb0VkaXQgPSBudWxsOwogICAgICAgICAgICB0aGlzLmdldFVzZXJzKCkKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBFZGl0VXNlcgogICAgICAgICAqLwogICAgICAgIEVkaXRVc2VyKHVzZXIpIHsKICAgICAgICAgICAgdGhpcy51c2VyVG9FZGl0ID0gdXNlcjsKICAgICAgICAgICAgdGhpcy51c2VySW5BY3Rpb24gPSB0cnVlCiAgICAgICAgfSwKCiAgICAgICAgY2hhbmdlU3RhdHVzKGlkKSB7CiAgICAgICAgICAgIHVzZXJzLmNoYW5nZVN0YXR1cyhpZCkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVzZXJzKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"card m-2\">\r\n            <div class=\"card-body\">\r\n                Filter:\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6\">\r\n                        <!-- departments -->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Departments</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.departments\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.department = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!--positions-->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Positions</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.positions\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.position = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!--brands-->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Brands</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.brands\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.brand = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!--countries-->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Countries</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.countries\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.country = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-md-6\">\r\n\r\n                        <!--nationality-->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Nationality</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.countries\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.nationality = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!--status-->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Status</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.status\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.active = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!--role-->\r\n                        <div class=\"custom-row mb-2\">\r\n                            <label class=\"width-150\">Role</label>\r\n                            <div class=\"width-200\">\r\n                                <AppSelect2 :options=\"filterLists.roles\" :keys=\"['id', 'name']\"\r\n                                            @optionSelected=\"opt => {filter.role = opt; filter.page = 1}\"></AppSelect2>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!--table to show all users-->\r\n        <div class=\"card m-2\">\r\n            <div class=\"card-body\">\r\n                <div class=\"d-flex mb-2\">\r\n                    <button class=\"btn btn-primary mr-2\"\r\n                            data-toggle=\"modal\"\r\n                            data-target=\"#userForm\"\r\n                            @click=\"userInAction = true\">Add User\r\n                    </button>\r\n                    <export-excel :data=\"users.data\"\r\n                                  class=\"btn btn-dark\"\r\n                                  name=\"Users\">\r\n                        Export\r\n                    </export-excel>\r\n                </div>\r\n\r\n                <div v-show=\"!loading\" class=\"table-responsive\">\r\n                    <table class=\"table table-bordered\">\r\n                        <thead>\r\n                        <tr class=\"bg-info text-white\">\r\n                            <td>Name</td>\r\n                            <td>Phone</td>\r\n                            <td>Department</td>\r\n                            <td>Position</td>\r\n                            <td>Brand</td>\r\n                            <td>Country</td>\r\n                            <td>Nationality</td>\r\n                            <td>Status</td>\r\n                            <td>Edit</td>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <template v-if=\"users.data && users.data.length > 0\">\r\n                            <tr v-for=\"user in users.data\" :key=\"user.id\">\r\n                                <td>{{user.name}}</td>\r\n                                <td>{{user.phone}}</td>\r\n                                <td>{{user.department}}</td>\r\n                                <td>{{user.position}}</td>\r\n                                <td>{{user.brand_name}}</td>\r\n                                <td>{{user.country}}</td>\r\n                                <td>{{user.nationality}}</td>\r\n                                <td>\r\n                                    <span v-if=\"user.active == 1\">Active</span>\r\n                                    <span v-else class=\"text-danger\">Inactive</span>\r\n                                    <a href=\"javascipt:void(0)\" class=\"mx-2\" @click.prevent=\"changeStatus(user.id)\">Change</a>\r\n                                </td>\r\n                                <td>\r\n                                    <a href=\"javascript:void(0)\"\r\n                                       data-toggle=\"modal\"\r\n                                       data-target=\"#userForm\"\r\n                                       @click.prevent=\"EditUser(user)\">\r\n                                        Edit\r\n                                    </a>\r\n                                </td>\r\n                            </tr>\r\n                        </template>\r\n                        <tr v-else class=\"text-center\">\r\n                            <td colspan=\"9\">There are no users to show</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <div v-show=\"!loading\">\r\n                    <p>Page {{currentPage}} of {{lastPage}}</p>\r\n                    <div class=\"width-150\">\r\n                        <select class=\"pagination-options\" style=\"width: 100%\">\r\n                            <option value=\"\"></option>\r\n                            <option v-for=\"option in lastPage\" :key=\"option\"\r\n                                    :selected=\"option == currentPage\">{{option}}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <p class=\"text-center\" v-show=\"loading\">Loading ...</p>\r\n            </div>\r\n        </div>\r\n\r\n        <!--add edit form-->\r\n        <div class=\"modal fade\" id=\"userForm\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"userFormLabel\"\r\n             aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n                <AddEditUser v-if=\"userInAction\" :filterLists=\"filterLists\"\r\n                             :userToEdit=\"userToEdit\"\r\n                             @userSaved=\"userSaved\"></AddEditUser>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import users from \"../api/users\";\r\n    import AppSelect2 from \"../components/AppSelect2\";\r\n    import $ from \"jquery\";\r\n    import AddEditUser from \"../components/AddEditUser\";\r\n\r\n    export default {\r\n        name: \"users\",\r\n        components: {AddEditUser, AppSelect2},\r\n        data() {\r\n            return {\r\n                list: ['departments', 'positions', 'brands', 'countries', 'roles'],\r\n                filterLists: {\r\n                    departments: [],\r\n                    positions: [],\r\n                    brands: [],\r\n                    countries: [],\r\n                    roles: [],\r\n                    status: [\r\n                        {\r\n                            name: 'Active',\r\n                            id: 1\r\n                        }, {\r\n                            name: 'Inactive',\r\n                            id: 0\r\n                        }\r\n                    ],\r\n                },\r\n                filter: {\r\n                    page: 1,\r\n                    length: 10,\r\n                    role: '',\r\n                    department: '',\r\n                    position: '',\r\n                    brand: '',\r\n                    country: '',\r\n                    nationality: '',\r\n                    active: '',\r\n                    text_search: ''\r\n                },\r\n                users: {},\r\n                currentPage: 1,\r\n                lastPage: null,\r\n                userInAction: false,\r\n                userToEdit: null,\r\n                loading: false\r\n            }\r\n        },\r\n        watch: {\r\n            'filter': {\r\n                deep: true,\r\n                handler: 'getUsers'\r\n            }\r\n        },\r\n        mounted() {\r\n            this.list.map(li => {\r\n                users.getFilterList(li)\r\n                    .then(res => {\r\n                        this.filterLists[li] = res;\r\n                    })\r\n            });\r\n\r\n            /**\r\n             * Initialize pagination select\r\n             */\r\n            let that = this;\r\n            $('.pagination-options').select2({\r\n                width: 'resolve',\r\n                placeholder: 'Please select option'\r\n            }).on('change', function () {\r\n                that.filter.page = $('.pagination-options').select2('val');\r\n            });\r\n\r\n            /**\r\n             * Get all users\r\n             */\r\n            this.getUsers();\r\n\r\n            $('#userForm').on('hidden.bs.modal', function () {\r\n                that.userInAction = false\r\n            })\r\n        },\r\n        methods: {\r\n            getUsers() {\r\n                this.loading = true;\r\n                this.$http.post('https://www.keden-edu.com/kntra/api/users/list', {\r\n                    ...this.filter\r\n                }, {\r\n                    headers: {\r\n                        'Authorization': 'Bearer ' + this.$store.state.token\r\n                    }\r\n                }).then(res => {\r\n                    this.loading = false;\r\n                    this.users = res.data.data.data;\r\n                    this.currentPage = res.data.data.data.current_page;\r\n                    this.lastPage = res.data.data.data.last_page;\r\n                }).catch(() => this.loading = false)\r\n            },\r\n\r\n            /**\r\n             * Method invoked when user form is submitted successfully\r\n             */\r\n            userSaved() {\r\n                $('#userForm').modal('toggle');\r\n                this.userToEdit = null;\r\n                this.getUsers()\r\n            },\r\n\r\n            /**\r\n             * EditUser\r\n             */\r\n            EditUser(user) {\r\n                this.userToEdit = user;\r\n                this.userInAction = true\r\n            },\r\n\r\n            changeStatus(id) {\r\n                users.changeStatus(id)\r\n                    .then(() => {\r\n                        this.getUsers()\r\n                    })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}